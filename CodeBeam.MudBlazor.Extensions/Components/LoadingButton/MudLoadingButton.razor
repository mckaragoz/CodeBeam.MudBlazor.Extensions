@namespace MudExtensions
@inherits MudBaseButton

@if (ButtonVariant == ButtonVariant.Button)
{
    <MudButton Disabled="@(Disabled ? true : _loading.Value ? true : false)"
           Size="@Size" Class="@Class" Style="@Style" UserAttributes="@UserAttributes" Variant="@Variant" Color="@Color" OnClick="@ButtonClick"
           Href="@Href" Target="@Target" ButtonType="@ButtonType" DropShadow="@DropShadow" Ripple="@Ripple"
           StartIcon="@StartIcon" EndIcon="@EndIcon" FullWidth="@FullWidth" HtmlTag="@HtmlTag"
           IconClass="@IconClass" IconColor="@IconColor" Tag="@Tag">
        @if (_loading.Value)
        {
            if (LoadingAdornment == Adornment.Start)
            {
                <MudProgressCircular Class="me-2" Size="Size.Small" Color="@LoadingCircularColor" Indeterminate="true" />
            }

            if (LoadingContent != null)
            {
                @LoadingContent
            }
            else
            {
                @ChildContent
            }

            if (LoadingAdornment == Adornment.End)
            {
                <MudProgressCircular Class="ms-2" Size="Size.Small" Color="@LoadingCircularColor" Indeterminate="true" />
            }
        }
        else
        {
            @ChildContent
        }
        </MudButton>
}
else if (ButtonVariant == ButtonVariant.IconButton)
{
    <MudIconButton Disabled="@(Disabled ? true : _loading.Value ? true : false)"
               Size="@Size" Class="@Class" Style="@Style" UserAttributes="@UserAttributes" Variant="@Variant" Color="@Color" OnClick="@ButtonClick"
               Href="@Href" Target="@Target" ButtonType="@ButtonType" DropShadow="@DropShadow" Ripple="@Ripple"
               Icon="@(_loading.Value ? null : Icon)" HtmlTag="@HtmlTag">
        @if (_loading.Value)
        {
            <div class="d-flex align-center">
                @if (LoadingAdornment == Adornment.Start)
                {
                    <MudProgressCircular Class="@(LoadingContent != null ? "me-2" : null)" Size="Size.Small" Color="@LoadingCircularColor" Indeterminate="true" />
                }
                @if (LoadingContent != null)
                {
                    @LoadingContent
                }
                @if (LoadingAdornment == Adornment.End)
                {
                    <MudProgressCircular Class="@(LoadingContent != null ? "ms-2" : null)" Size="Size.Small" Color="@LoadingCircularColor" Indeterminate="true" />
                }
            </div>

        }
        </MudIconButton>
}
else if (ButtonVariant == ButtonVariant.Fab)
{
    @if (_loading.Value == false)
    {
        <MudFab Disabled="@(Disabled ? true : _loading.Value ? true : false)"
        Size="@Size" Class="@Class" Style="@Style" UserAttributes="@UserAttributes" Color="@Color" OnClick="@ButtonClick"
        Href="@Href" Target="@Target" ButtonType="@ButtonType" DropShadow="@DropShadow" Ripple="@Ripple"
        StartIcon="@StartIcon" EndIcon="@EndIcon" IconColor="@IconColor" IconSize="@IconSize" Label="@Label"
        HtmlTag="@HtmlTag" />
    }
    else
    {
        if (LoadingAdornment == Adornment.Start)
        {
            <MudProgressCircular Size="Size.Small" Color="@LoadingCircularColor" Indeterminate="true" />
        }

        if (LoadingContent != null)
        {
            @LoadingContent
        }


        if (LoadingAdornment == Adornment.End)
        {
            <MudProgressCircular Size="Size.Small" Color="@LoadingCircularColor" Indeterminate="true" />
        }
    }
}
